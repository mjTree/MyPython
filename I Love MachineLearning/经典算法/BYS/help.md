# 朴素贝叶斯使用手册
本文档包含

+ __init\__.py
+ Bayes.py
+ Fileoperation.py
+ demo.py
+ demo.csv
+ help.md

共六个文件。其中  
Bayes.py 和 Fileoperation.py 为主要部分，   
Fileoperation.py 执行读取文件并将读取的文件转换为只含数字的二维列表方便 Bayes.py 进行后续操作。  
Bayes.py 提供进行朴素贝叶斯模型训练及预测的所有函数，也包括对数据集进行训练集和测试集分割的函数。  
demo.py 为函数调用例子，本文档为其解释，方便使用者调用函数。___demo.csv___ 为使用数据。  
##  使用方式
新建 demo.py 文件  
首先使用以下代码导入接下来需要使用的包
>from mybayes import Fileoperation as fo  
>from mybayes import Bayes

### 默认使用方式

>dataset = fo.loadCsv(filename)  

_filename_ 为文件名，当文件位于与 demo.py 相同目录时，可以只输入文件名，如：_demo.csv_ 。  
>dataset = fo.loadCsv(demo.csv)  

调用目录外的文件时，请使用绝对路径加文件名，如: _D:/python_learning/wheel-lee/mybayes/demo.csv_  
>dataset = fo.loadCsv(D:/python_learning/wheel-lee/mybayes/demo.csv)  

注1：因为 _python_ 设计原因，在 _python_ 内写绝对路径时用 "/ " 而非 " \\ "  
注2：_loadCsv_ 函数仅能导入 _csv_ 格式文件，并将其转化为仅包含数字的二维列表( _list_ )方便 Bayes.py 进行进一步操作，因此，可用任意能产生二维列表( _list_ )的函数进行代替。

以上操作将文件中的数据导入 ___dataset___ 这个二维列表( _list_ )中，接下来调用 Bayes.py 中的默认方法 ___bayes___ 即可实现简单的预测功能
>summarizes,prediction,accuracy = Bayes.bayes(dataset,0.67)  

得到结果如下
>#######训练结果summarizes###########  
{1.0:  
[(4.989304812834225, 3.689551222546441),  
(141.23529411764707, 33.17950908161392),  
(71.97860962566845, 22.023681589249293),  
(23.3475935828877, 17.683356858057834),  
(100.16577540106952, 125.86197126863496),  
(35.478074866310166, 7.667442728469831),  
(0.5356363636363638, 0.33823763098546966),  
(36.893048128342244, 10.975010951709539)],  
0.0:  
[(3.1223241590214066, 2.878472580669491),  
(110.24159021406727, 26.76550719447649),  
(67.74923547400611, 18.16585461665884),  
(19.98776758409786, 14.870396237654033),  
(71.1743119266055, 104.78193927495987),  
(30.52691131498474, 7.9179115074210085),  
(0.4281590214067277, 0.28971182916783983),  
(30.840978593272173, 11.552724015064673)]}  
###################################  
#######预测结果prediction###########  
[[0.0, 137.0, 40.0, 35.0, 168.0, 43.1, 2.288, 33.0, 1.0],   
[5.0, 116.0, 74.0, 0.0, 0.0, 25.6, 0.201, 30.0, 0.0],   
[10.0, 139.0, 80.0, 0.0, 0.0, 27.1, 1.441, 57.0, 1.0],   
·····················(结果太多略有删节)  
[7.0, 137.0, 90.0, 41.0, 0.0, 32.0, 0.391, 39.0, 1.0],  
[0.0, 123.0, 72.0, 0.0, 0.0, 36.3, 0.258, 52.0, 0.0],  
[9.0, 89.0, 62.0, 0.0, 0.0, 22.5, 0.142, 33.0, 0.0],  
[10.0, 101.0, 76.0, 48.0, 180.0, 32.9, 0.171, 63.0, 1.0],  
[1.0, 126.0, 60.0, 0.0, 0.0, 30.1, 0.349, 47.0, 0.0]]  
###################################  
#######准确度accuracy###############  
76.37795275590551

___bayes___ 函数包含三个返回值与两个输入值，  
__输入值__  
___dataset___ 为此前运用 _loadCsv_ 所生成的仅包含 _float_ 类型值的二维列表，且最后一列为类别信息。  
___splitRatio___ 为数据集进行分割的值，取值范围 __(0,1]__ ，可以等于 __1__ ，不可以等于 __0__ 。默认为 __0.67__ ，即三分之二为训练集，三分之一为测试集。取 __1__ 时将输入集合全部作为训练集，取 __0__ 时报错。  
__输出值__  
___summarizes___ 为训练结果，即当前输入的训练集所训练出来的结果，如上代码所示。可用作以后进行同类型数据的预测。  
___prediction___ 为预测结果，即测试集中所有项的预测结果。输出为属性加上类别，类别在最后一列。  
___accuracy___ 为预测的准确度，仅当测试集包含类别信息时有意义。取值范围 __(0,100)__    

### 自定义使用方式  
### Sept 1 导入需要的数据集
同样使用 ___loadCsv___ 将文档内的数据加载到一个二维列表里并且将内容转换为 _float_  
>dataset = fo.loadCsv(filename)  

此处与默认方式相同，不过多介绍。  

如果需要分割数据集可以调用 ___Bayes.py___ 中的 ___splitDataset(dataset,splitRatio)___ 函数进行数据集的分割，和 ___bayes___ 函数相同的输入值相同，但 ___splitRatio___ 不再有默认值。  
返回值如下：
>trainSet,tsetSet = Bayes.splitDataset(dataset,splitRatio)  

___trainSet___ 为训练集， ___testSet___ 为测试集，供手动调用使用。  

____此处默认不需要进行数据集的分割____  
### Sept 2 使用数据集进行训练
接下来进行模型的训练。
调用 ___Bayes.py___ 中的 ___summarizeByClass(dataset)___ 函数
>summarizes = Bayes.summarizeByClass(dataset)  
print(summarizes)  
\>>>  
{1.0:  
[(4.989304812834225, 3.689551222546441),  
(141.23529411764707, 33.17950908161392),  
(71.97860962566845, 22.023681589249293),  
(23.3475935828877, 17.683356858057834),  
(100.16577540106952, 125.86197126863496),  
(35.478074866310166, 7.667442728469831),  
(0.5356363636363638, 0.33823763098546966),  
(36.893048128342244, 10.975010951709539)],  
0.0:  
[(3.1223241590214066, 2.878472580669491),  
(110.24159021406727, 26.76550719447649),  
(67.74923547400611, 18.16585461665884),  
(19.98776758409786, 14.870396237654033),  
(71.1743119266055, 104.78193927495987),  
(30.52691131498474, 7.9179115074210085),  
(0.4281590214067277, 0.28971182916783983),  
(30.840978593272173, 11.552724015064673)]}  

获得训练结果 ___summarizes___ 可导出保存以备下次预测使用。
### Sept 3 预测
调用 ___Bayes.py___ 中的多种函数可进行不同情况的预测。
+ ___calculateClassProbabilities___ 函数可以计算输入项属于各个类别的概率
  >input = [6,148,72,35,0,33.6,0.627,50]  
   result2 = Bayes.calculateClassProbabilities(summarizes,input)  
   print(result2)  
   \>>>{0.0: 2.2050538494889668e-13, 1.0: 7.917990348125452e-13}  

   其中 ___summarizes___ 为Setp 2 中得到的训练结果。___input___ 为需要预测的项，为列表形式，__只支持单项预测__。
+ ___predict___ 函数可以计算输入项最可能属于的类别并输出。
  >input = [6,148,72,35,0,33.6,0.627,50]  
  result1 = Bayes.predict(summarizes,input)  
  print("input belong to {0}".format(result1))  
  \>>>input belong to 1.0  

  与 ___calculateClassProbabilities___ 函数输入相同，参见上文。
+ ___getPredictions___ 函数可进行多重预测，即输入一个二维列表( _list_ ) 然后对其中的所有元素进行预测，输出一个包含预测结果的列表。
  >result3 = Bayes.getPredictions(summarizes,dataset)  
  print(result3)  
  \>>>[1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0,·············· 0.0, 1.0, 0.0, 1.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0]  

  结果冗长故有删节。结果顺序与输入顺序完全相同。